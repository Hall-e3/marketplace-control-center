(()=>{var e={};e.id=716,e.ids=[716],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},763:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),r(4595),r(7564),r(5866);var s=r(3191),a=r(8716),n=r(7922),o=r.n(n),i=r(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d=["",{children:["auth",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4595)),"/home/hall/Downloads/HomeAssessment/baisoft-marketplace/frontend/app/auth/login/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,7564)),"/home/hall/Downloads/HomeAssessment/baisoft-marketplace/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/hall/Downloads/HomeAssessment/baisoft-marketplace/frontend/app/auth/login/page.tsx"],u="/auth/login/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/auth/login/page",pathname:"/auth/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2993:(e,t,r)=>{Promise.resolve().then(r.bind(r,1590))},9956:(e,t,r)=>{Promise.resolve().then(r.bind(r,8608))},8396:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},1590:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var s=r(326),a=r(7110),n=r(770);let o=n.Km(["admin","editor","approver","viewer"]),i=n.Ry({name:o,can_create_product:n.O7().default(!1),can_edit_product:n.O7().default(!1),can_approve_product:n.O7().default(!1),can_delete_product:n.O7().default(!1)}),l=n.Ry({id:n.Z_().uuid().optional(),name:n.Z_().min(2,"Business name must be at least 2 characters")});n.Ry({id:n.Z_().uuid(),email:n.Z_().email(),first_name:n.Z_().optional(),last_name:n.Z_().optional(),business:l.optional(),role:i.optional(),avatar:n.Z_().optional()});let d=n.Ry({email:n.Z_().email("Invalid email address"),password:n.Z_().min(1,"Password is required")});n.Ry({email:n.Z_().email("Invalid email address"),password:n.Z_().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[0-9]/,"Password must contain at least one number"),re_password:n.Z_(),first_name:n.Z_().min(2,"First name must be at least 2 characters"),last_name:n.Z_().min(2,"Last name must be at least 2 characters"),business_name:n.Z_().min(2,"Business name must be at least 2 characters")}).refine(e=>e.password===e.re_password,{message:"Passwords do not match",path:["re_password"]});var c=r(4976),u=r(119),p=r(5047),m=r(5999),h=r(5035),g=r(2374);let x="/auth",f={login:async e=>(await g.h.post(`${x}/jwt/create/`,e)).data,register:async e=>(await g.h.post(`${x}/users/`,e)).data,getCurrentUser:async()=>(await g.h.get(`${x}/users/me/`)).data};var v=r(772),b=r(6384),y=r(1048),_=r(3071),w=r(434);function j(){let{mutate:e,isPending:t}=function(){(0,c.NL)();let e=(0,p.useRouter)(),{getUser:t,getRole:r,getToken:s,authenticate:a,signOut:n}=(0,h.a)();return(0,u.D)({mutationFn:async({operation:e,data:t})=>{switch(e){case"login":return f.login(t);case"register":return f.register(t);case"logout":return n();default:throw Error("Invalid operation")}},onSuccess:(r,n)=>{"login"===n.operation?(f.getCurrentUser().then(r=>{t(r),a(!0),m.Am.success("Logged in successfully"),e.push("/dashboard")}),r&&"access"in r&&(s(r.access),localStorage.setItem("access_token",r.access),localStorage.setItem("refresh_token",r.refresh))):"register"===n.operation?(m.Am.success("Registration successful. Please login."),e.push("/auth/login")):n.operation},onError:e=>{console.error(e);let t=e.response?.data?.detail||"An error occurred";m.Am.error(t)}})}(),{register:r,handleSubmit:n,formState:{errors:o}}=(0,a.c)({schema:d});return s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-muted/40 p-4",children:(0,s.jsxs)(_.Zb,{className:"w-full max-w-md",children:[(0,s.jsxs)(_.Ol,{className:"space-y-1",children:[s.jsx(_.ll,{className:"text-2xl font-bold text-center",children:"Login"}),s.jsx(_.SZ,{className:"text-center",children:"Enter your email to access your account"})]}),(0,s.jsxs)("form",{onSubmit:n(t=>{e({operation:"login",data:t})}),children:[(0,s.jsxs)(_.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(y._,{htmlFor:"email",children:"Email"}),s.jsx(b.I,{id:"email",type:"email",placeholder:"m@example.com",...r("email")}),o.email&&s.jsx("p",{className:"text-sm text-destructive",children:o.email.message})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx(y._,{htmlFor:"password",children:"Password"}),s.jsx(w.default,{href:"/auth/forgot-password",className:"text-sm text-muted-foreground hover:underline",children:"Forgot password?"})]}),s.jsx(b.I,{id:"password",type:"password",...r("password")}),o.password&&s.jsx("p",{className:"text-sm text-destructive",children:o.password.message})]})]}),(0,s.jsxs)(_.eW,{className:"flex flex-col gap-4",children:[s.jsx(v.z,{className:"w-full",type:"submit",disabled:t,children:t?"Logging in...":"Login"}),(0,s.jsxs)("div",{className:"text-center text-sm",children:["Don't have an account?"," ",s.jsx(w.default,{href:"/auth/register",className:"underline hover:text-primary",children:"Sign up"})]})]})]})]})})}},8608:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>j});var s=r(326),a=r(4976),n=r(787),o=r(5842),i=r(2618),l=r(712),d=r(1549),c=r(1762);r(7398);var u=r(9215),p=r(495);let m={getItem:e=>Promise.resolve(null),setItem:(e,t)=>Promise.resolve(t),removeItem:e=>Promise.resolve()},h=(0,l.UY)({app:u.ZP,auth:(0,c.OJ)({key:"auth",storage:m,whitelist:["userInfo","token","role","isAuthenticated"]},p.ZP)}),g=(0,c.OJ)({key:"root",storage:m,whitelist:["auth"]},h),x=(0,d.xC)({reducer:g,middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE"]}}),devTools:!1}),f=(0,c.p5)(x);function v({children:e}){return s.jsx(o.zt,{store:x,children:s.jsx(i.r,{loading:null,persistor:f,children:e})})}r(7577);var b=r(4831);function y({children:e,...t}){return s.jsx(b.f,{...t,children:e})}var _=r(5999);let w=new(r(2852)).S({defaultOptions:{queries:{staleTime:6e4,refetchOnWindowFocus:!1}}});function j({children:e}){return s.jsx(v,{children:(0,s.jsxs)(a.aH,{client:w,children:[(0,s.jsxs)(y,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:[e,s.jsx(_.x7,{})]}),s.jsx(n.t,{initialIsOpen:!1})]})})}},772:(e,t,r)=>{"use strict";r.d(t,{z:()=>l});var s=r(326);r(7577);var a=r(4214),n=r(9360),o=r(7863);let i=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function l({className:e,variant:t,size:r,asChild:n=!1,...l}){let d=n?a.g7:"button";return s.jsx(d,{"data-slot":"button",className:(0,o.cn)(i({variant:t,size:r,className:e})),...l})}},3071:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>o,SZ:()=>l,Zb:()=>n,aY:()=>d,eW:()=>c,ll:()=>i});var s=r(326);r(7577);var a=r(7863);function n({className:e,...t}){return s.jsx("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function o({className:e,...t}){return s.jsx("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function i({className:e,...t}){return s.jsx("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...t})}function l({className:e,...t}){return s.jsx("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...t})}function d({className:e,...t}){return s.jsx("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...t})}function c({className:e,...t}){return s.jsx("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",e),...t})}},6384:(e,t,r)=>{"use strict";r.d(t,{I:()=>n});var s=r(326);r(7577);var a=r(7863);function n({className:e,type:t,...r}){return s.jsx("input",{type:t,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}},1048:(e,t,r)=>{"use strict";r.d(t,{_:()=>o});var s=r(326);r(7577);var a=r(9152),n=r(7863);function o({className:e,...t}){return s.jsx(a.f,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}},5035:(e,t,r)=>{"use strict";r.d(t,{a:()=>i});var s=r(7577),a=r(5842),n=r(495),o=r(5047);function i(){let e=(0,o.useRouter)(),t=(0,a.I0)(),r=(0,a.v9)(e=>e.auth),i=(0,s.useCallback)(e=>{t((0,n.M)(e))},[t]),l=(0,s.useCallback)(e=>{t((0,n.o4)(e))},[t]),d=(0,s.useCallback)(e=>{t((0,n.gD)(e))},[t]),c=(0,s.useCallback)(e=>{t((0,n.BF)(e))},[t]),u=(0,s.useCallback)(async()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),t((0,n.kS)()),e.push("/auth/login")},[t,e]),p="admin"===r.role,m="editor"===r.role,h="approver"===r.role,g=r._persist?.rehydrated??!0;return{...r,user:r.userInfo,loading:!g,router:e,signOut:u,getRole:d,getToken:l,getUser:i,authenticate:c,isAdmin:p,isEditor:m,isApprover:h}}},7110:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});var s=r(4723),a=r(4064);function n({schema:e,...t}){return(0,s.cI)({...t,resolver:e?(0,a.F)(e):void 0})}},7863:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(1135),a=r(1009);function n(...e){return(0,a.m6)((0,s.W)(e))}},5047:(e,t,r)=>{"use strict";var s=r(7389);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},9215:(e,t,r)=>{"use strict";r.d(t,{Dc:()=>o,GB:()=>a,K4:()=>i,ZP:()=>l,li:()=>n});let s=(0,r(1549).oM)({name:"app",initialState:{sidebarOpen:!0,theme:"system",loading:!1},reducers:{toggleSidebar:e=>{e.sidebarOpen=!e.sidebarOpen},setSidebarOpen:(e,t)=>{e.sidebarOpen=t.payload},setTheme:(e,t)=>{e.theme=t.payload},setLoading:(e,t)=>{e.loading=t.payload}}}),{toggleSidebar:a,setSidebarOpen:n,setTheme:o,setLoading:i}=s.actions,l=s.reducer},495:(e,t,r)=>{"use strict";r.d(t,{BF:()=>l,M:()=>i,ZP:()=>d,gD:()=>n,kS:()=>a,o4:()=>o});let s=(0,r(1549).oM)({name:"auth",initialState:{role:null,token:null,userInfo:null,isAuthenticated:!1},reducers:{logout:e=>{e.role=null,e.token=null,e.userInfo=null,e.isAuthenticated=!1},setUserData:(e,t)=>{e.userInfo=t.payload,t.payload.role&&(e.role="string"==typeof t.payload.role?t.payload.role:t.payload.role.name)},setToken:(e,t)=>{e.token=t.payload},setRole:(e,t)=>{e.role=t.payload},setIsAuthenticated:(e,t)=>{e.isAuthenticated=t.payload}}}),{logout:a,setRole:n,setToken:o,setUserData:i,setIsAuthenticated:l}=s.actions,d=s.reducer},2374:(e,t,r)=>{"use strict";r.d(t,{h:()=>o});var s=r(4464),a=r(5999);let n=process.env.NEXT_PUBLIC_API_URL||"http://127.0.0.1:8000/api",o=s.Z.create({baseURL:n,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{let t=localStorage.getItem("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),o.interceptors.response.use(e=>e,async e=>{let t=e.config;e.response?.status!==401||t._retry||(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"));let r=e.response?.data?.detail||e.message||"An error occurred";return a.Am.error(r),Promise.reject(e)})},4595:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>o,__esModule:()=>n,default:()=>i});var s=r(8570);let a=(0,s.createProxy)(String.raw`/home/hall/Downloads/HomeAssessment/baisoft-marketplace/frontend/app/auth/login/page.tsx`),{__esModule:n,$$typeof:o}=a;a.default;let i=(0,s.createProxy)(String.raw`/home/hall/Downloads/HomeAssessment/baisoft-marketplace/frontend/app/auth/login/page.tsx#default`)},7564:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p,metadata:()=>u});var s=r(9510),a=r(5384),n=r.n(a),o=r(8570);let i=(0,o.createProxy)(String.raw`/home/hall/Downloads/HomeAssessment/baisoft-marketplace/frontend/components/providers.tsx`),{__esModule:l,$$typeof:d}=i;i.default;let c=(0,o.createProxy)(String.raw`/home/hall/Downloads/HomeAssessment/baisoft-marketplace/frontend/components/providers.tsx#Providers`);r(7272);let u={title:"Baisoft Marketplace",description:"Internal marketplace for Baisoft"};function p({children:e}){return s.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:s.jsx("body",{className:n().className,children:s.jsx(c,{children:e})})})}},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[156,404,326,464,748],()=>r(763));module.exports=s})();