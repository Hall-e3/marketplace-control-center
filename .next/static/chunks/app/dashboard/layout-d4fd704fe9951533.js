(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[663],{1877:function(e,t,r){Promise.resolve().then(r.bind(r,240))},240:function(e,t,r){"use strict";r.d(t,{DashboardLayout:function(){return S}});var a=r(7437),n=r(5732),s=r(9592);r(2265);var i=r(3269),o=r(7440);function l(e){let{className:t,...r}=e;return(0,a.jsx)(i.fC,{"data-slot":"avatar",className:(0,o.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",t),...r})}function d(e){let{className:t,...r}=e;return(0,a.jsx)(i.NY,{"data-slot":"avatar-fallback",className:(0,o.cn)("bg-muted flex size-full items-center justify-center rounded-full",t),...r})}var c=r(4693),u=r(325);function f(e){let{className:t,orientation:r="horizontal",decorative:n=!0,...s}=e;return(0,a.jsx)(u.f,{"data-slot":"separator",decorative:n,orientation:r,className:(0,o.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...s})}var m=r(1192);function x(e){let{...t}=e;return(0,a.jsx)(m.fC,{"data-slot":"dropdown-menu",...t})}function v(e){let{...t}=e;return(0,a.jsx)(m.xz,{"data-slot":"dropdown-menu-trigger",...t})}function p(e){let{className:t,sideOffset:r=4,...n}=e;return(0,a.jsx)(m.Uv,{children:(0,a.jsx)(m.VY,{"data-slot":"dropdown-menu-content",sideOffset:r,className:(0,o.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function h(e){let{className:t,inset:r,variant:n="default",...s}=e;return(0,a.jsx)(m.ck,{"data-slot":"dropdown-menu-item","data-inset":r,"data-variant":n,className:(0,o.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function b(e){let{className:t,inset:r,...n}=e;return(0,a.jsx)(m.__,{"data-slot":"dropdown-menu-label","data-inset":r,className:(0,o.cn)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...n})}function g(e){let{className:t,...r}=e;return(0,a.jsx)(m.Z0,{"data-slot":"dropdown-menu-separator",className:(0,o.cn)("bg-border -mx-1 my-1 h-px",t),...r})}var j=r(4258),N=r(9896);let y={admin:"default",editor:"secondary",approver:"outline",viewer:"outline"};function w(){var e,t;let{user:r,signOut:n}=(0,s.a)(),i=(null==r?void 0:r.first_name)?"".concat(r.first_name," ").concat(r.last_name||""):(null==r?void 0:r.email)||"User",o=(null==r?void 0:r.first_name)?r.first_name.charAt(0):(null==r?void 0:null===(e=r.email)||void 0===e?void 0:e.charAt(0))||"U",u=(null==r?void 0:null===(t=r.role)||void 0===t?void 0:t.name)||"viewer";return(0,a.jsx)("header",{className:"fixed top-0 left-0 right-0 h-16 bg-background border-b border-border z-50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-full px-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-gradient-to-br from-primary to-primary/70",children:(0,a.jsx)("span",{className:"text-sm font-bold text-primary-foreground",children:"D"})}),(0,a.jsx)("span",{className:"text-lg font-semibold hidden sm:inline",children:"Dashboard"})]}),r&&(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"hidden sm:flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-foreground",children:i}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:r.email})]}),(0,a.jsx)(c.C,{variant:y[u]||"default",className:"whitespace-nowrap capitalize",children:u})]}),(0,a.jsx)(f,{orientation:"vertical",className:"h-6"}),(0,a.jsxs)(x,{children:[(0,a.jsx)(v,{asChild:!0,children:(0,a.jsx)("button",{className:"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 rounded-full",children:(0,a.jsx)(l,{className:"h-10 w-10 cursor-pointer",children:(0,a.jsx)(d,{className:"bg-gradient-to-br from-primary to-primary/70 text-primary-foreground font-semibold",children:o.toUpperCase()})})})}),(0,a.jsxs)(p,{align:"end",className:"w-48",children:[(0,a.jsx)(b,{children:(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:i}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:r.email}),(0,a.jsx)(c.C,{variant:y[u]||"default",className:"w-fit mt-1 capitalize",children:u})]})}),(0,a.jsx)(g,{}),(0,a.jsxs)(h,{className:"cursor-pointer",children:[(0,a.jsx)(j.Z,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Settings"})]}),(0,a.jsx)(g,{}),(0,a.jsxs)(h,{onClick:()=>{n()},className:"cursor-pointer text-destructive focus:text-destructive",children:[(0,a.jsx)(N.Z,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Logout"})]})]})]})]})]})})}var k=r(7140),C=r(7524),_=r(1240),z=r(4436),Z=r(518),D=r(7592),I=r(7138);function O(){let{sidebarOpen:e,toggleSidebar:t}=(0,n.q)(),{user:r}=(0,s.a)(),i=[{label:"Dashboard",href:"/dashboard",icon:(0,a.jsx)(k.Z,{className:"h-5 w-5"})},{label:"Products",href:"/dashboard/products",icon:(0,a.jsx)(C.Z,{className:"h-5 w-5"})},{label:"Users",href:"/dashboard/users",icon:(0,a.jsx)(_.Z,{className:"h-5 w-5"}),requiredRole:"admin"},{label:"Public View",href:"/public/products",icon:(0,a.jsx)(z.Z,{className:"h-5 w-5"})}].filter(e=>!e.requiredRole||(null==r?void 0:r.role)&&e.requiredRole===r.role.name);return(0,a.jsx)("aside",{className:(0,o.cn)("fixed left-0 top-16 h-[calc(100vh-64px)] bg-background border-r border-border transition-all duration-300 ease-in-out z-40",e?"w-64":"w-20"),children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("nav",{className:"flex-1 px-3 py-6 space-y-2",children:i.map(t=>(0,a.jsxs)(I.default,{href:t.href,className:(0,o.cn)("flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors","text-foreground/70 hover:text-foreground hover:bg-muted","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"),children:[t.icon,e&&(0,a.jsx)("span",{children:t.label})]},t.href))}),(0,a.jsx)("div",{className:"px-3 py-4 border-t border-border",children:(0,a.jsx)("button",{onClick:t,className:(0,o.cn)("flex items-center justify-center w-full gap-2 px-4 py-3 rounded-lg","text-sm font-medium text-foreground/70 hover:text-foreground hover:bg-muted","transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"),"aria-label":e?"Collapse sidebar":"Expand sidebar",children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Collapse"})]}):(0,a.jsx)(D.Z,{className:"h-5 w-5"})})})]})})}function S(e){let{children:t}=e,{sidebarOpen:r}=(0,n.q)();return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)(w,{}),(0,a.jsx)(O,{}),(0,a.jsx)("main",{className:(0,o.cn)("transition-all duration-300 ease-in-out pt-16",r?"ml-64":"ml-20"),children:(0,a.jsx)("div",{className:"h-full min-h-[calc(100vh-64px)] p-6 md:p-8",children:t})})]})}},4693:function(e,t,r){"use strict";r.d(t,{C:function(){return l}});var a=r(7437);r(2265);var n=r(1538),s=r(3027),i=r(7440);let o=(0,s.j)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,asChild:s=!1,...l}=e,d=s?n.g7:"span";return(0,a.jsx)(d,{"data-slot":"badge",className:(0,i.cn)(o({variant:r}),t),...l})}},5732:function(e,t,r){"use strict";r.d(t,{q:function(){return o}});var a=r(2265),n=r(6463),s=r(1444),i=r(2785);function o(){let e=(0,s.I0)(),t=(0,n.useRouter)(),r=(0,s.v9)(e=>e.app),o=(0,a.useCallback)(()=>{e((0,i.GB)())},[e]),l=(0,a.useCallback)(t=>{e((0,i.li)(t))},[e]),d=(0,a.useCallback)(t=>{e((0,i.Dc)(t))},[e]),c=(0,a.useCallback)(t=>{e((0,i.K4)(t))},[e]),u=(0,a.useCallback)((e,r)=>{(null==r?void 0:r.replace)?t.replace(e):t.push(e)},[t]),f=(0,a.useCallback)(t=>{e((0,i.li)(t))},[e]),m=(0,a.useCallback)(()=>{e((0,i.li)(!1)),e((0,i.K4)(!1))},[e]);return{...r,toggleSidebar:o,setSidebarOpen:l,setTheme:d,setAppLoading:c,navigate:u,toggleMenu:f,reset:m}}},9592:function(e,t,r){"use strict";r.d(t,{a:function(){return o}});var a=r(2265),n=r(1444),s=r(7586),i=r(6463);function o(){var e,t;let r=(0,i.useRouter)(),o=(0,n.I0)(),l=(0,n.v9)(e=>e.auth),d=(0,a.useCallback)(e=>{o((0,s.M)(e))},[o]),c=(0,a.useCallback)(e=>{o((0,s.o4)(e))},[o]),u=(0,a.useCallback)(e=>{o((0,s.gD)(e))},[o]),f=(0,a.useCallback)(e=>{o((0,s.BF)(e))},[o]),m=(0,a.useCallback)(async()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),o((0,s.kS)()),r.push("/auth/login")},[o,r]),x="admin"===l.role,v="editor"===l.role,p="approver"===l.role,h=null===(t=null===(e=l._persist)||void 0===e?void 0:e.rehydrated)||void 0===t||t;return{...l,user:l.userInfo,loading:!h,router:r,signOut:m,getRole:u,getToken:c,getUser:d,authenticate:f,isAdmin:x,isEditor:v,isApprover:p}}},7440:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var a=r(4839),n=r(6164);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}},2785:function(e,t,r){"use strict";r.d(t,{Dc:function(){return i},GB:function(){return n},K4:function(){return o},li:function(){return s}});let a=(0,r(1116).oM)({name:"app",initialState:{sidebarOpen:!0,theme:"system",loading:!1},reducers:{toggleSidebar:e=>{e.sidebarOpen=!e.sidebarOpen},setSidebarOpen:(e,t)=>{e.sidebarOpen=t.payload},setTheme:(e,t)=>{e.theme=t.payload},setLoading:(e,t)=>{e.loading=t.payload}}}),{toggleSidebar:n,setSidebarOpen:s,setTheme:i,setLoading:o}=a.actions;t.ZP=a.reducer},7586:function(e,t,r){"use strict";r.d(t,{BF:function(){return l},M:function(){return o},gD:function(){return s},kS:function(){return n},o4:function(){return i}});let a=(0,r(1116).oM)({name:"auth",initialState:{role:null,token:null,userInfo:null,isAuthenticated:!1},reducers:{logout:e=>{e.role=null,e.token=null,e.userInfo=null,e.isAuthenticated=!1},setUserData:(e,t)=>{e.userInfo=t.payload,t.payload.role&&(e.role="string"==typeof t.payload.role?t.payload.role:t.payload.role.name)},setToken:(e,t)=>{e.token=t.payload},setRole:(e,t)=>{e.role=t.payload},setIsAuthenticated:(e,t)=>{e.isAuthenticated=t.payload}}}),{logout:n,setRole:s,setToken:i,setUserData:o,setIsAuthenticated:l}=a.actions;t.ZP=a.reducer}},function(e){e.O(0,[247,320,231,45,971,23,744],function(){return e(e.s=1877)}),_N_E=e.O()}]);