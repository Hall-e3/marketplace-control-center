(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[56],{7591:function(e,t,r){Promise.resolve().then(r.bind(r,7328))},7328:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var n=r(7437),a=r(6463),s=r(8286),i=r(537);let o=i.Km(["draft","pending_approval","approved"]),c=i.Ry({id:i.Z_().uuid(),email:i.Z_().email(),first_name:i.Z_().optional(),last_name:i.Z_().optional()});i.Ry({id:i.Z_().uuid(),name:i.Z_(),slug:i.Z_(),description:i.Z_(),price:i.Z_(),status:o,created_by:c.optional(),created_at:i.Z_().datetime(),updated_at:i.Z_().datetime(),business_name:i.Z_().optional(),created_by_name:i.Z_().optional()});let d=i.Ry({name:i.Z_().min(3,"Product name must be at least 3 characters").max(255,"Product name must not exceed 255 characters"),description:i.Z_().min(10,"Description must be at least 10 characters").max(2e3,"Description must not exceed 2000 characters"),price:i.oQ.number().positive("Price must be a positive number").max(999999.99,"Price is too high")});d.partial();var u=r(7287),l=r(495),p=r(3102),m=r(7135),f=r(6013);function v(){let e=(0,a.useRouter)(),{createProduct:t}=(0,u.k)(),{register:r,handleSubmit:i,formState:{errors:o}}=(0,s.c)({schema:d});return(0,n.jsx)("div",{className:"max-w-2xl mx-auto py-8",children:(0,n.jsxs)(f.Zb,{children:[(0,n.jsxs)(f.Ol,{children:[(0,n.jsx)(f.ll,{children:"Create New Product"}),(0,n.jsx)(f.SZ,{children:"Add a new product to your business catalog."})]}),(0,n.jsxs)("form",{onSubmit:i(r=>{t.mutate(r,{onSuccess:()=>{e.push("/dashboard/products")}})}),children:[(0,n.jsxs)(f.aY,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(m._,{htmlFor:"name",children:"Product Name"}),(0,n.jsx)(p.I,{id:"name",...r("name"),placeholder:"e.g. Premium Widget"}),o.name&&(0,n.jsx)("p",{className:"text-sm text-destructive",children:o.name.message})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(m._,{htmlFor:"description",children:"Description"}),(0,n.jsx)("textarea",{id:"description",...r("description"),className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Describe your product..."}),o.description&&(0,n.jsx)("p",{className:"text-sm text-destructive",children:o.description.message})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(m._,{htmlFor:"price",children:"Price ($)"}),(0,n.jsx)(p.I,{id:"price",type:"number",step:"0.01",...r("price"),placeholder:"0.00"}),o.price&&(0,n.jsx)("p",{className:"text-sm text-destructive",children:o.price.message})]})]}),(0,n.jsxs)(f.eW,{className:"flex justify-between",children:[(0,n.jsx)(l.z,{variant:"outline",type:"button",onClick:()=>e.back(),children:"Cancel"}),(0,n.jsx)(l.z,{type:"submit",disabled:t.isPending,children:t.isPending?"Creating...":"Create Product"})]})]})]})})}},495:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var n=r(7437);r(2265);var a=r(1538),s=r(3027),i=r(7440);let o=(0,s.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:r,size:s,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,n.jsx)(u,{"data-slot":"button",className:(0,i.cn)(o({variant:r,size:s,className:t})),...d})}},6013:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return s},aY:function(){return d},eW:function(){return u},ll:function(){return o}});var n=r(7437);r(2265);var a=r(7440);function s(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function i(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function o(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",t),...r})}function c(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",t),...r})}function d(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",t),...r})}function u(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",t),...r})}},3102:function(e,t,r){"use strict";r.d(t,{I:function(){return s}});var n=r(7437);r(2265);var a=r(7440);function s(e){let{className:t,type:r,...s}=e;return(0,n.jsx)("input",{type:r,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...s})}},7135:function(e,t,r){"use strict";r.d(t,{_:function(){return i}});var n=r(7437);r(2265);var a=r(8837),s=r(7440);function i(e){let{className:t,...r}=e;return(0,n.jsx)(a.f,{"data-slot":"label",className:(0,s.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...r})}},5732:function(e,t,r){"use strict";r.d(t,{q:function(){return o}});var n=r(2265),a=r(6463),s=r(1444),i=r(2785);function o(){let e=(0,s.I0)(),t=(0,a.useRouter)(),r=(0,s.v9)(e=>e.app),o=(0,n.useCallback)(()=>{e((0,i.GB)())},[e]),c=(0,n.useCallback)(t=>{e((0,i.li)(t))},[e]),d=(0,n.useCallback)(t=>{e((0,i.Dc)(t))},[e]),u=(0,n.useCallback)(t=>{e((0,i.K4)(t))},[e]),l=(0,n.useCallback)((e,r)=>{(null==r?void 0:r.replace)?t.replace(e):t.push(e)},[t]),p=(0,n.useCallback)(t=>{e((0,i.li)(t))},[e]),m=(0,n.useCallback)(()=>{e((0,i.li)(!1)),e((0,i.K4)(!1))},[e]);return{...r,toggleSidebar:o,setSidebarOpen:c,setTheme:d,setAppLoading:u,navigate:l,toggleMenu:p,reset:m}}},8286:function(e,t,r){"use strict";r.d(t,{c:function(){return s}});var n=r(9343),a=r(1014);function s(e){let{schema:t,...r}=e;return(0,n.cI)({...r,resolver:t?(0,a.F)(t):void 0})}},7287:function(e,t,r){"use strict";r.d(t,{k:function(){return d}});var n=r(3191),a=r(5118),s=r(5524),i=r(9801),o=r(7776),c=r(5732);function d(){let e=(0,n.NL)(),{setAppLoading:t}=(0,c.q)(),{data:r=[],isLoading:d,isError:u}=(0,a.a)({queryKey:["products"],queryFn:i.R.getProducts}),l=(0,s.D)({mutationFn:e=>i.R.createProduct(e),onSuccess:()=>{e.invalidateQueries({queryKey:["products"]}),o.Am.success("Product created successfully")},onError:e=>{o.Am.error(e.message||"Failed to create product")}});return{products:r,isLoading:d,isError:u,createProduct:l,updateProduct:(0,s.D)({mutationFn:e=>{let{id:t,data:r}=e;return i.R.updateProduct(t,r)},onSuccess:()=>{e.invalidateQueries({queryKey:["products"]}),o.Am.success("Product updated successfully")},onError:e=>{o.Am.error(e.message||"Failed to update product")}}),deleteProduct:(0,s.D)({mutationFn:e=>i.R.deleteProduct(e),onSuccess:()=>{e.invalidateQueries({queryKey:["products"]}),o.Am.success("Product deleted successfully")},onError:e=>{o.Am.error(e.message||"Failed to delete product")}}),approveProduct:(0,s.D)({mutationFn:e=>i.R.approveProduct(e),onSuccess:()=>{e.invalidateQueries({queryKey:["products"]}),o.Am.success("Product approved successfully")},onError:e=>{o.Am.error(e.message||"Failed to approve product")}})}}},7440:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var n=r(4839),a=r(6164);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}},2785:function(e,t,r){"use strict";r.d(t,{Dc:function(){return i},GB:function(){return a},K4:function(){return o},li:function(){return s}});let n=(0,r(1116).oM)({name:"app",initialState:{sidebarOpen:!0,theme:"system",loading:!1},reducers:{toggleSidebar:e=>{e.sidebarOpen=!e.sidebarOpen},setSidebarOpen:(e,t)=>{e.sidebarOpen=t.payload},setTheme:(e,t)=>{e.theme=t.payload},setLoading:(e,t)=>{e.loading=t.payload}}}),{toggleSidebar:a,setSidebarOpen:s,setTheme:i,setLoading:o}=n.actions;t.ZP=n.reducer},459:function(e,t,r){"use strict";r.d(t,{h:function(){return i}});var n=r(8472),a=r(7776);let s=r(357).env.NEXT_PUBLIC_API_URL||"http://127.0.0.1:8000/api",i=n.Z.create({baseURL:s,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{let t=localStorage.getItem("access_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),i.interceptors.response.use(e=>e,async e=>{var t,r,n;let s=e.config;(null===(t=e.response)||void 0===t?void 0:t.status)!==401||s._retry||(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"));let i=(null===(n=e.response)||void 0===n?void 0:null===(r=n.data)||void 0===r?void 0:r.detail)||e.message||"An error occurred";return a.Am.error(i),Promise.reject(e)})},9801:function(e,t,r){"use strict";r.d(t,{R:function(){return s}});var n=r(459);let a="/products",s={getProducts:async()=>(await n.h.get("".concat(a,"/"))).data,getPublicProducts:async()=>(await n.h.get("".concat(a,"/public/"))).data,getProduct:async e=>(await n.h.get("".concat(a,"/").concat(e,"/"))).data,createProduct:async e=>(await n.h.post("".concat(a,"/"),e)).data,updateProduct:async(e,t)=>(await n.h.put("".concat(a,"/").concat(e,"/"),t)).data,approveProduct:async e=>(await n.h.post("".concat(a,"/").concat(e,"/approve/"))).data,deleteProduct:async e=>{await n.h.delete("".concat(a,"/").concat(e,"/"))}}}},function(e){e.O(0,[247,320,776,472,277,989,118,971,23,744],function(){return e(e.s=7591)}),_N_E=e.O()}]);